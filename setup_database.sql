-- MySQL Database Setup Script for Banking System
-- Run this script to set up the database properly

-- Create database if it doesn't exist
CREATE DATABASE IF NOT EXISTS bank_system;
USE bank_system;

-- Create a dedicated user for the banking system (optional but recommended)
-- Uncomment and modify these lines if you want to create a specific user:
-- CREATE USER IF NOT EXISTS 'bank_user'@'localhost' IDENTIFIED BY 'secure_password_123';
-- GRANT ALL PRIVILEGES ON bank_system.* TO 'bank_user'@'localhost';
-- FLUSH PRIVILEGES;

-- Users Table (Enhanced)
CREATE TABLE users (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    role ENUM('CUSTOMER', 'ADMIN') DEFAULT 'CUSTOMER',
    status ENUM('ACTIVE', 'INACTIVE', 'SUSPENDED') DEFAULT 'ACTIVE',
    deleted_at TIMESTAMP NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_email (email),
    INDEX idx_role (role),
    INDEX idx_status (status),
    INDEX idx_deleted_at (deleted_at)
);

-- User Profiles Table
CREATE TABLE user_profiles (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id CHAR(36) UNIQUE NOT NULL,
    phone VARCHAR(20),
    address TEXT,
    date_of_birth DATE,
    ssn_last_four CHAR(4),
    profile_image VARCHAR(500),
    two_factor_enabled BOOLEAN DEFAULT FALSE,
    two_factor_secret VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id)
);

-- Accounts Table (Enhanced)
CREATE TABLE accounts (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id CHAR(36) NOT NULL,
    account_number VARCHAR(20) UNIQUE NOT NULL,
    routing_number VARCHAR(20) NOT NULL,
    type ENUM('CHECKING', 'SAVINGS') NOT NULL,
    balance DECIMAL(15,2) DEFAULT 0.00,
    currency VARCHAR(3) DEFAULT 'USD',
    status ENUM('ACTIVE', 'INACTIVE', 'FROZEN', 'CLOSED', 'PENDING_APPROVAL') DEFAULT 'PENDING_APPROVAL',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id),
    INDEX idx_account_number (account_number),
    INDEX idx_status (status),
    INDEX idx_type (type),
    CONSTRAINT chk_balance_positive CHECK (balance >= 0)
);

-- Account Limits Table
CREATE TABLE account_limits (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    account_id CHAR(36) NOT NULL,
    daily_limit DECIMAL(15,2) DEFAULT 10000.00,
    monthly_limit DECIMAL(15,2) DEFAULT 50000.00,
    transaction_limit DECIMAL(15,2) DEFAULT 5000.00,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (account_id) REFERENCES accounts(id) ON DELETE CASCADE,
    INDEX idx_account_id (account_id)
);

-- Transactions Table (Enhanced)
CREATE TABLE transactions (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    amount DECIMAL(15,2) NOT NULL,
    fee_amount DECIMAL(10,2) DEFAULT 0.00,
    type ENUM('DEPOSIT', 'WITHDRAWAL', 'TRANSFER', 'FEE') NOT NULL,
    description VARCHAR(500) NOT NULL,
    from_account_id CHAR(36),
    to_account_id CHAR(36),
    status ENUM('PENDING', 'COMPLETED', 'FAILED', 'CANCELLED') DEFAULT 'COMPLETED',
    reference VARCHAR(100) UNIQUE,
    account_id CHAR(36) NOT NULL,
    processed_at TIMESTAMP NULL,
    processed_by CHAR(36) NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (from_account_id) REFERENCES accounts(id),
    FOREIGN KEY (to_account_id) REFERENCES accounts(id),
    FOREIGN KEY (account_id) REFERENCES accounts(id) ON DELETE CASCADE,
    FOREIGN KEY (processed_by) REFERENCES users(id),
    INDEX idx_account_id (account_id),
    INDEX idx_created_at (created_at),
    INDEX idx_type (type),
    INDEX idx_status (status),
    INDEX idx_reference (reference),
    INDEX idx_transactions_date_range (account_id, created_at),
    CONSTRAINT chk_amount_positive CHECK (amount > 0),
    CONSTRAINT chk_fee_positive CHECK (fee_amount >= 0)
);

-- Sessions Table
CREATE TABLE sessions (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id CHAR(36) NOT NULL,
    token_hash VARCHAR(255) UNIQUE NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id),
    INDEX idx_token_hash (token_hash),
    INDEX idx_expires_at (expires_at)
);

-- Notifications Table
CREATE TABLE notifications (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id CHAR(36) NOT NULL,
    type ENUM('TRANSACTION', 'SECURITY', 'SYSTEM', 'PROMOTIONAL') NOT NULL,
    title VARCHAR(255) NOT NULL,
    message TEXT NOT NULL,
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id),
    INDEX idx_type (type),
    INDEX idx_is_read (is_read),
    INDEX idx_created_at (created_at)
);

-- Audit Logs Table (Enhanced)
CREATE TABLE audit_logs (
    id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id CHAR(36),
    action VARCHAR(100) NOT NULL,
    description TEXT,
    ip_address VARCHAR(45),
    user_agent TEXT,
    metadata JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    INDEX idx_user_id (user_id),
    INDEX idx_action (action),
    INDEX idx_created_at (created_at),
    INDEX idx_audit_logs_date_range (created_at, action)
);

-- Insert realistic Egyptian users with encrypted passwords
-- Passwords are all 'password123' hashed with bcrypt (cost factor 10)
INSERT INTO users (id, email, password, first_name, last_name, role, status) VALUES
-- Admin User
('550e8400-e29b-41d4-a716-446655440001', 'admin@nubank.com', '$2a$10$t30ONmG1cZ6hVcgBaY.GTO1xJwisLGEvZ0o8ucB1rKtre2ZP1h9We', 'Ahmed', 'Mohamed', 'ADMIN', 'ACTIVE'),

-- Regular Customers with Egyptian names
('550e8400-e29b-41d4-a716-446655440002', 'mohamed.ahmed@nu.edu.eg', '$2a$10$rgSiwH/1dRs2DKpI/UFEYOO3E/1wAOodHCvtk0HpY5nhXHsZy/fYi', 'Mohamed', 'Ahmed', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440003', 'fatma.khalil@nu.edu.eg', '$2a$10$7JD9Jlh.3RkUKWH8u4u11.CP3hcnhezm.wllH7t8.GgcrrkLjucR6', 'Fatma', 'Khalil', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440004', 'ali.hassan@nu.edu.eg', '$2a$10$0K97AT8LP0zap9VTqueeZuQ1jCk5C37DvBDx/R6fQ55vKKhGYLZi.', 'Ali', 'Hassan', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440005', 'sara.mahmoud@nu.edu.eg', '$2a$10$rgSiwH/1dRs2DKpI/UFEYOO3E/1wAOodHCvtk0HpY5nhXHsZy/fYi', 'Sara', 'Mahmoud', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440006', 'youssef.ibrahim@nu.edu.eg', '$2a$10$7JD9Jlh.3RkUKWH8u4u11.CP3hcnhezm.wllH7t8.GgcrrkLjucR6', 'Youssef', 'Ibrahim', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440007', 'nour.el-sayed@nu.edu.eg', '$2a$10$0K97AT8LP0zap9VTqueeZuQ1jCk5C37DvBDx/R6fQ55vKKhGYLZi.', 'Nour', 'El-Sayed', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440008', 'omar.farouk@nu.edu.eg', '$2a$10$rgSiwH/1dRs2DKpI/UFEYOO3E/1wAOodHCvtk0HpY5nhXHsZy/fYi', 'Omar', 'Farouk', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440009', 'aya.mostafa@nu.edu.eg', '$2a$10$7JD9Jlh.3RkUKWH8u4u11.CP3hcnhezm.wllH7t8.GgcrrkLjucR6', 'Aya', 'Mostafa', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440010', 'karim.abdullah@nu.edu.eg', '$2a$10$0K97AT8LP0zap9VTqueeZuQ1jCk5C37DvBDx/R6fQ55vKKhGYLZi.', 'Karim', 'Abdullah', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440011', 'layla.hussein@nu.edu.eg', '$2a$10$rgSiwH/1dRs2DKpI/UFEYOO3E/1wAOodHCvtk0HpY5nhXHsZy/fYi', 'Layla', 'Hussein', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440012', 'hassan.zaki@nu.edu.eg', '$2a$10$7JD9Jlh.3RkUKWH8u4u11.CP3hcnhezm.wllH7t8.GgcrrkLjucR6', 'Hassan', 'Zaki', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440013', 'mariam.fathy@nu.edu.eg', '$2a$10$0K97AT8LP0zap9VTqueeZuQ1jCk5C37DvBDx/R6fQ55vKKhGYLZi.', 'Mariam', 'Fathy', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440014', 'ahmed.salem@nu.edu.eg', '$2a$10$rgSiwH/1dRs2DKpI/UFEYOO3E/1wAOodHCvtk0HpY5nhXHsZy/fYi', 'Ahmed', 'Salem', 'CUSTOMER', 'ACTIVE'),
('550e8400-e29b-41d4-a716-446655440015', 'hana.elsayed@nu.edu.eg', '$2a$10$7JD9Jlh.3RkUKWH8u4u11.CP3hcnhezm.wllH7t8.GgcrrkLjucR6', 'Hana', 'Elsayed', 'CUSTOMER', 'ACTIVE');

-- Insert user profiles with realistic Egyptian data
INSERT INTO user_profiles (id, user_id, phone, address, date_of_birth, ssn_last_four, two_factor_enabled) VALUES
('660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', '+20-10-12345678', '123 Tahrir Square, Downtown, Cairo, Egypt', '1985-03-15', '1234', TRUE),
('660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440002', '+20-11-23456789', '45 Nile Corniche, Zamalek, Cairo, Egypt', '1992-07-22', '5678', FALSE),
('660e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440003', '+20-12-34567890', '78 Shoubra Street, Shoubra, Cairo, Egypt', '1988-11-08', '9012', FALSE),
('660e8400-e29b-41d4-a716-446655440004', '550e8400-e29b-41d4-a716-446655440004', '+20-10-45678901', '156 Mohamed Ali Street, Alexandria, Egypt', '1995-01-30', '3456', TRUE),
('660e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440005', '+20-11-56789012', '89 El-Horreya Road, Heliopolis, Cairo, Egypt', '1990-05-14', '7890', FALSE),
('660e8400-e29b-41d4-a716-446655440006', '550e8400-e29b-41d4-a716-446655440006', '+20-12-67890123', '234 Mansoura Street, Mansoura, Egypt', '1987-09-03', '1234', FALSE),
('660e8400-e29b-41d4-a716-446655440007', '550e8400-e29b-41d4-a716-446655440007', '+20-10-78901234', '67 El-Gomhoreya Street, Tanta, Egypt', '1993-12-19', '5678', TRUE),
('660e8400-e29b-41d4-a716-446655440008', '550e8400-e29b-41d4-a716-446655440008', '+20-11-89012345', '123 El-Nasr Road, Nasr City, Cairo, Egypt', '1989-04-25', '9012', FALSE),
('660e8400-e29b-41d4-a716-446655440009', '550e8400-e29b-41d4-a716-446655440009', '+20-12-90123456', '456 El-Maadi Street, Maadi, Cairo, Egypt', '1991-08-11', '3456', FALSE),
('660e8400-e29b-41d4-a716-446655440010', '550e8400-e29b-41d4-a716-446655440010', '+20-10-01234567', '78 El-Dokki Street, Dokki, Cairo, Egypt', '1986-02-07', '7890', TRUE),
('660e8400-e29b-41d4-a716-446655440011', '550e8400-e29b-41d4-a716-446655440011', '+20-11-12345678', '234 El-Haram Street, Giza, Egypt', '1994-06-28', '1234', FALSE),
('660e8400-e29b-41d4-a716-446655440012', '550e8400-e29b-41d4-a716-446655440012', '+20-12-23456789', '567 El-Mohandessin Street, Mohandessin, Cairo, Egypt', '1988-10-16', '5678', FALSE),
('660e8400-e29b-41d4-a716-446655440013', '550e8400-e29b-41d4-a716-446655440013', '+20-10-34567890', '89 El-Obour Street, Obour City, Egypt', '1992-03-09', '9012', TRUE),
('660e8400-e29b-41d4-a716-446655440014', '550e8400-e29b-41d4-a716-446655440014', '+20-11-45678901', '123 El-Shorouk City, Cairo, Egypt', '1987-07-21', '3456', FALSE),
('660e8400-e29b-41d4-a716-446655440015', '550e8400-e29b-41d4-a716-446655440015', '+20-12-56789012', '456 El-Sheikh Zayed City, Giza, Egypt', '1990-11-04', '7890', FALSE);

-- Insert accounts with realistic balances and account numbers
INSERT INTO accounts (id, user_id, account_number, routing_number, type, balance, currency, status) VALUES
-- Admin account
('770e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', '1000000001', '001234567', 'CHECKING', 50000.00, 'EGP', 'ACTIVE'),

-- Customer accounts (mix of checking and savings)
('770e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440002', '2000000001', '001234567', 'CHECKING', 15420.50, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440002', '2000000002', '001234567', 'SAVINGS', 45230.75, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440004', '550e8400-e29b-41d4-a716-446655440003', '2000000003', '001234567', 'CHECKING', 8765.25, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440004', '2000000004', '001234567', 'CHECKING', 23450.00, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440006', '550e8400-e29b-41d4-a716-446655440004', '2000000005', '001234567', 'SAVINGS', 67890.30, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440007', '550e8400-e29b-41d4-a716-446655440005', '2000000006', '001234567', 'CHECKING', 12345.67, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440008', '550e8400-e29b-41d4-a716-446655440006', '2000000007', '001234567', 'CHECKING', 34567.89, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440009', '550e8400-e29b-41d4-a716-446655440006', '2000000008', '001234567', 'SAVINGS', 89123.45, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440010', '550e8400-e29b-41d4-a716-446655440007', '2000000009', '001234567', 'CHECKING', 5678.90, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440011', '550e8400-e29b-41d4-a716-446655440008', '2000000010', '001234567', 'CHECKING', 78901.23, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440012', '550e8400-e29b-41d4-a716-446655440009', '2000000011', '001234567', 'CHECKING', 45678.90, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440013', '550e8400-e29b-41d4-a716-446655440009', '2000000012', '001234567', 'SAVINGS', 112233.44, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440014', '550e8400-e29b-41d4-a716-446655440010', '2000000013', '001234567', 'CHECKING', 33445.56, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440015', '550e8400-e29b-41d4-a716-446655440011', '2000000014', '001234567', 'CHECKING', 66778.89, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440016', '550e8400-e29b-41d4-a716-446655440012', '2000000015', '001234567', 'SAVINGS', 44556.77, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440017', '550e8400-e29b-41d4-a716-446655440013', '2000000016', '001234567', 'CHECKING', 88990.12, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440018', '550e8400-e29b-41d4-a716-446655440014', '2000000017', '001234567', 'CHECKING', 22334.45, 'EGP', 'ACTIVE'),
('770e8400-e29b-41d4-a716-446655440019', '550e8400-e29b-41d4-a716-446655440015', '2000000018', '001234567', 'CHECKING', 55667.78, 'EGP', 'ACTIVE');

-- Insert account limits
INSERT INTO account_limits (id, account_id, daily_limit, monthly_limit, transaction_limit) VALUES
('880e8400-e29b-41d4-a716-446655440001', '770e8400-e29b-41d4-a716-446655440001', 50000.00, 200000.00, 10000.00),
('880e8400-e29b-41d4-a716-446655440002', '770e8400-e29b-41d4-a716-446655440002', 10000.00, 50000.00, 5000.00),
('880e8400-e29b-41d4-a716-446655440003', '770e8400-e29b-41d4-a716-446655440003', 15000.00, 75000.00, 7500.00),
('880e8400-e29b-41d4-a716-446655440004', '770e8400-e29b-41d4-a716-446655440004', 8000.00, 40000.00, 4000.00),
('880e8400-e29b-41d4-a716-446655440005', '770e8400-e29b-41d4-a716-446655440005', 12000.00, 60000.00, 6000.00),
('880e8400-e29b-41d4-a716-446655440006', '770e8400-e29b-41d4-a716-446655440006', 20000.00, 100000.00, 10000.00),
('880e8400-e29b-41d4-a716-446655440007', '770e8400-e29b-41d4-a716-446655440007', 9000.00, 45000.00, 4500.00),
('880e8400-e29b-41d4-a716-446655440008', '770e8400-e29b-41d4-a716-446655440008', 11000.00, 55000.00, 5500.00),
('880e8400-e29b-41d4-a716-446655440009', '770e8400-e29b-41d4-a716-446655440009', 25000.00, 125000.00, 12500.00),
('880e8400-e29b-41d4-a716-446655440010', '770e8400-e29b-41d4-a716-446655440010', 7000.00, 35000.00, 3500.00),
('880e8400-e29b-41d4-a716-446655440011', '770e8400-e29b-41d4-a716-446655440011', 13000.00, 65000.00, 6500.00),
('880e8400-e29b-41d4-a716-446655440012', '770e8400-e29b-41d4-a716-446655440012', 10000.00, 50000.00, 5000.00),
('880e8400-e29b-41d4-a716-446655440013', '770e8400-e29b-41d4-a716-446655440013', 30000.00, 150000.00, 15000.00),
('880e8400-e29b-41d4-a716-446655440014', '770e8400-e29b-41d4-a716-446655440014', 8500.00, 42500.00, 4250.00),
('880e8400-e29b-41d4-a716-446655440015', '770e8400-e29b-41d4-a716-446655440015', 6000.00, 30000.00, 3000.00),
('880e8400-e29b-41d4-a716-446655440016', '770e8400-e29b-41d4-a716-446655440016', 18000.00, 90000.00, 9000.00),
('880e8400-e29b-41d4-a716-446655440017', '770e8400-e29b-41d4-a716-446655440017', 9500.00, 47500.00, 4750.00),
('880e8400-e29b-41d4-a716-446655440018', '770e8400-e29b-41d4-a716-446655440018', 14000.00, 70000.00, 7000.00),
('880e8400-e29b-41d4-a716-446655440019', '770e8400-e29b-41d4-a716-446655440019', 11000.00, 55000.00, 5500.00);

-- Insert realistic transactions with Egyptian context
INSERT INTO transactions (id, amount, fee_amount, type, description, from_account_id, to_account_id, status, reference, account_id, processed_at, processed_by) VALUES
-- Admin transactions
('990e8400-e29b-41d4-a716-446655440001', 5000.00, 0.00, 'DEPOSIT', 'Monthly salary deposit', NULL, '770e8400-e29b-41d4-a716-446655440001', 'COMPLETED', 'SAL001', '770e8400-e29b-41d4-a716-446655440001', '2024-01-01 09:00:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440002', 2500.00, 5.00, 'TRANSFER', 'Transfer to Mohamed Ahmed', '770e8400-e29b-41d4-a716-446655440001', '770e8400-e29b-41d4-a716-446655440002', 'COMPLETED', 'TRF001', '770e8400-e29b-41d4-a716-446655440001', '2024-01-02 14:30:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Mohamed Ahmed transactions
('990e8400-e29b-41d4-a716-446655440003', 2500.00, 0.00, 'DEPOSIT', 'Salary from company', NULL, '770e8400-e29b-41d4-a716-446655440002', 'COMPLETED', 'SAL002', '770e8400-e29b-41d4-a716-446655440002', '2024-01-01 08:00:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440004', 500.00, 2.50, 'WITHDRAWAL', 'ATM withdrawal - Zamalek', '770e8400-e29b-41d4-a716-446655440002', NULL, 'COMPLETED', 'ATM001', '770e8400-e29b-41d4-a716-446655440002', '2024-01-03 16:45:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440005', 1200.00, 0.00, 'TRANSFER', 'Monthly savings transfer', '770e8400-e29b-41d4-a716-446655440002', '770e8400-e29b-41d4-a716-446655440003', 'COMPLETED', 'SAV001', '770e8400-e29b-41d4-a716-446655440002', '2024-01-05 10:00:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Fatma Khalil transactions
('990e8400-e29b-41d4-a716-446655440006', 3200.00, 0.00, 'DEPOSIT', 'Monthly salary', NULL, '770e8400-e29b-41d4-a716-446655440004', 'COMPLETED', 'SAL003', '770e8400-e29b-41d4-a716-446655440004', '2024-01-01 09:30:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440007', 850.00, 4.25, 'WITHDRAWAL', 'Grocery shopping - Carrefour', '770e8400-e29b-41d4-a716-446655440004', NULL, 'COMPLETED', 'POS001', '770e8400-e29b-41d4-a716-446655440004', '2024-01-04 18:20:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440008', 150.00, 0.75, 'WITHDRAWAL', 'Coffee shop payment', '770e8400-e29b-41d4-a716-446655440004', NULL, 'COMPLETED', 'POS002', '770e8400-e29b-41d4-a716-446655440004', '2024-01-06 11:15:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Ali Hassan transactions
('990e8400-e29b-41d4-a716-446655440009', 4500.00, 0.00, 'DEPOSIT', 'Freelance project payment', NULL, '770e8400-e29b-41d4-a716-446655440005', 'COMPLETED', 'FR001', '770e8400-e29b-41d4-a716-446655440005', '2024-01-02 14:00:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440010', 2000.00, 0.00, 'TRANSFER', 'Investment transfer', '770e8400-e29b-41d4-a716-446655440005', '770e8400-e29b-41d4-a716-446655440006', 'COMPLETED', 'INV001', '770e8400-e29b-41d4-a716-446655440005', '2024-01-07 13:30:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440011', 300.00, 1.50, 'WITHDRAWAL', 'Gas station payment', '770e8400-e29b-41d4-a716-446655440005', NULL, 'COMPLETED', 'GAS001', '770e8400-e29b-41d4-a716-446655440005', '2024-01-08 19:45:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Sara Mahmoud transactions
('990e8400-e29b-41d4-a716-446655440012', 2800.00, 0.00, 'DEPOSIT', 'Monthly salary', NULL, '770e8400-e29b-41d4-a716-446655440007', 'COMPLETED', 'SAL004', '770e8400-e29b-41d4-a716-446655440007', '2024-01-01 10:00:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440013', 1200.00, 6.00, 'TRANSFER', 'Rent payment to landlord', '770e8400-e29b-41d4-a716-446655440007', '770e8400-e29b-41d4-a716-446655440008', 'COMPLETED', 'RENT001', '770e8400-e29b-41d4-a716-446655440007', '2024-01-01 12:00:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Youssef Ibrahim transactions
('990e8400-e29b-41d4-a716-446655440014', 3500.00, 0.00, 'DEPOSIT', 'Business income', NULL, '770e8400-e29b-41d4-a716-446655440008', 'COMPLETED', 'BUS001', '770e8400-e29b-41d4-a716-446655440008', '2024-01-03 11:30:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440015', 800.00, 4.00, 'WITHDRAWAL', 'Restaurant payment', '770e8400-e29b-41d4-a716-446655440008', NULL, 'COMPLETED', 'RES001', '770e8400-e29b-41d4-a716-446655440008', '2024-01-05 20:15:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440016', 2500.00, 0.00, 'TRANSFER', 'Business investment', '770e8400-e29b-41d4-a716-446655440008', '770e8400-e29b-41d4-a716-446655440009', 'COMPLETED', 'BUS002', '770e8400-e29b-41d4-a716-446655440008', '2024-01-10 15:45:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Nour El-Sayed transactions
('990e8400-e29b-41d4-a716-446655440017', 2200.00, 0.00, 'DEPOSIT', 'Part-time job payment', NULL, '770e8400-e29b-41d4-a716-446655440010', 'COMPLETED', 'PT001', '770e8400-e29b-41d4-a716-446655440010', '2024-01-02 16:00:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440018', 450.00, 2.25, 'WITHDRAWAL', 'Pharmacy payment', '770e8400-e29b-41d4-a716-446655440010', NULL, 'COMPLETED', 'PHA001', '770e8400-e29b-41d4-a716-446655440010', '2024-01-07 14:30:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Omar Farouk transactions
('990e8400-e29b-41d4-a716-446655440019', 4100.00, 0.00, 'DEPOSIT', 'Consulting fee', NULL, '770e8400-e29b-41d4-a716-446655440011', 'COMPLETED', 'CON001', '770e8400-e29b-41d4-a716-446655440011', '2024-01-04 09:15:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440020', 600.00, 3.00, 'WITHDRAWAL', 'Online shopping', '770e8400-e29b-41d4-a716-446655440011', NULL, 'COMPLETED', 'SHOP001', '770e8400-e29b-41d4-a716-446655440011', '2024-01-09 17:20:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Aya Mostafa transactions
('990e8400-e29b-41d4-a716-446655440021', 2900.00, 0.00, 'DEPOSIT', 'Teaching salary', NULL, '770e8400-e29b-41d4-a716-446655440012', 'COMPLETED', 'TEACH001', '770e8400-e29b-41d4-a716-446655440012', '2024-01-01 08:30:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440022', 1800.00, 0.00, 'TRANSFER', 'Family support', '770e8400-e29b-41d4-a716-446655440012', '770e8400-e29b-41d4-a716-446655440013', 'COMPLETED', 'FAM001', '770e8400-e29b-41d4-a716-446655440012', '2024-01-06 10:45:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Karim Abdullah transactions
('990e8400-e29b-41d4-a716-446655440023', 5200.00, 0.00, 'DEPOSIT', 'Engineering project payment', NULL, '770e8400-e29b-41d4-a716-446655440014', 'COMPLETED', 'ENG001', '770e8400-e29b-41d4-a716-446655440014', '2024-01-03 13:00:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440024', 950.00, 4.75, 'WITHDRAWAL', 'Electronics store', '770e8400-e29b-41d4-a716-446655440014', NULL, 'COMPLETED', 'ELE001', '770e8400-e29b-41d4-a716-446655440014', '2024-01-08 16:10:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440025', 3000.00, 0.00, 'TRANSFER', 'Emergency savings', '770e8400-e29b-41d4-a716-446655440014', '770e8400-e29b-41d4-a716-446655440015', 'COMPLETED', 'EMER001', '770e8400-e29b-41d4-a716-446655440014', '2024-01-12 11:30:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Layla Hussein transactions
('990e8400-e29b-41d4-a716-446655440026', 2600.00, 0.00, 'DEPOSIT', 'Translation work payment', NULL, '770e8400-e29b-41d4-a716-446655440016', 'COMPLETED', 'TRANS001', '770e8400-e29b-41d4-a716-446655440016', '2024-01-02 15:20:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440027', 350.00, 1.75, 'WITHDRAWAL', 'Bookstore purchase', '770e8400-e29b-41d4-a716-446655440016', NULL, 'COMPLETED', 'BOOK001', '770e8400-e29b-41d4-a716-446655440016', '2024-01-11 14:50:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Hassan Zaki transactions
('990e8400-e29b-41d4-a716-446655440028', 3800.00, 0.00, 'DEPOSIT', 'Medical practice income', NULL, '770e8400-e29b-41d4-a716-446655440017', 'COMPLETED', 'MED001', '770e8400-e29b-41d4-a716-446655440017', '2024-01-05 12:15:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440029', 700.00, 3.50, 'WITHDRAWAL', 'Medical supplies', '770e8400-e29b-41d4-a716-446655440017', NULL, 'COMPLETED', 'SUP001', '770e8400-e29b-41d4-a716-446655440017', '2024-01-13 09:40:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Mariam Fathy transactions
('990e8400-e29b-41d4-a716-446655440030', 3100.00, 0.00, 'DEPOSIT', 'Graphic design project', NULL, '770e8400-e29b-41d4-a716-446655440018', 'COMPLETED', 'DES001', '770e8400-e29b-41d4-a716-446655440018', '2024-01-04 10:25:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440031', 520.00, 2.60, 'WITHDRAWAL', 'Art supplies store', '770e8400-e29b-41d4-a716-446655440018', NULL, 'COMPLETED', 'ART001', '770e8400-e29b-41d4-a716-446655440018', '2024-01-14 16:35:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Ahmed Salem transactions
('990e8400-e29b-41d4-a716-446655440032', 2700.00, 0.00, 'DEPOSIT', 'IT consulting fee', NULL, '770e8400-e29b-41d4-a716-446655440019', 'COMPLETED', 'IT001', '770e8400-e29b-41d4-a716-446655440019', '2024-01-06 14:10:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440033', 400.00, 2.00, 'WITHDRAWAL', 'Software license', '770e8400-e29b-41d4-a716-446655440019', NULL, 'COMPLETED', 'SOFT001', '770e8400-e29b-41d4-a716-446655440019', '2024-01-15 11:55:00', '550e8400-e29b-41d4-a716-446655440001'),

-- Hana Elsayed transactions
('990e8400-e29b-41d4-a716-446655440034', 2400.00, 0.00, 'DEPOSIT', 'Content writing payment', NULL, '770e8400-e29b-41d4-a716-446655440020', 'COMPLETED', 'WRITE001', '770e8400-e29b-41d4-a716-446655440020', '2024-01-07 17:05:00', '550e8400-e29b-41d4-a716-446655440001'),
('990e8400-e29b-41d4-a716-446655440035', 280.00, 1.40, 'WITHDRAWAL', 'Stationery store', '770e8400-e29b-41d4-a716-446655440020', NULL, 'COMPLETED', 'STAT001', '770e8400-e29b-41d4-a716-446655440020', '2024-01-16 13:25:00', '550e8400-e29b-41d4-a716-446655440001');

-- Insert sessions for active users
INSERT INTO sessions (id, user_id, token_hash, expires_at) VALUES
('aa0e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'hashed_token_admin', '2024-12-31 23:59:59'),
('aa0e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440002', 'hashed_token_mohamed', '2024-12-31 23:59:59'),
('aa0e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440003', 'hashed_token_fatma', '2024-12-31 23:59:59'),
('aa0e8400-e29b-41d4-a716-446655440004', '550e8400-e29b-41d4-a716-446655440004', 'hashed_token_ali', '2024-12-31 23:59:59'),
('aa0e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440005', 'hashed_token_sara', '2024-12-31 23:59:59');

-- Insert notifications
INSERT INTO notifications (id, user_id, type, title, message) VALUES
('bb0e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440002', 'TRANSACTION', 'Deposit Received', 'You have received EGP 2,500.00 in your checking account'),
('bb0e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440003', 'TRANSACTION', 'Salary Deposited', 'Monthly salary of EGP 3,200.00 has been deposited'),
('bb0e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440004', 'SECURITY', 'New Login Detected', 'A new login was detected from Cairo, Egypt'),
('bb0e8400-e29b-41d4-a716-446655440004', '550e8400-e29b-41d4-a716-446655440005', 'TRANSACTION', 'Transfer Completed', 'Your transfer of EGP 2,000.00 to savings account was successful'),
('bb0e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440006', 'SYSTEM', 'Account Limit Updated', 'Your daily transaction limit has been updated to EGP 12,000.00'),
('bb0e8400-e29b-41d4-a716-446655440006', '550e8400-e29b-41d4-a716-446655440007', 'TRANSACTION', 'Withdrawal Processed', 'ATM withdrawal of EGP 800.00 completed successfully'),
('bb0e8400-e29b-41d4-a716-446655440007', '550e8400-e29b-41d4-a716-446655440008', 'PROMOTIONAL', 'New Feature Available', 'Try our new instant transfer feature with zero fees'),
('bb0e8400-e29b-41d4-a716-446655440008', '550e8400-e29b-41d4-a716-446655440009', 'SECURITY', 'Password Changed', 'Your account password was successfully changed'),
('bb0e8400-e29b-41d4-a716-446655440009', '550e8400-e29b-41d4-a716-446655440010', 'TRANSACTION', 'Payment Received', 'You received EGP 1,200.00 from Nour El-Sayed'),
('bb0e8400-e29b-41d4-a716-446655440010', '550e8400-e29b-41d4-a716-446655440011', 'SYSTEM', 'Maintenance Notice', 'Scheduled maintenance will occur tonight from 2-4 AM');

-- Insert audit logs
INSERT INTO audit_logs (id, user_id, action, description, ip_address, user_agent) VALUES
('cc0e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'LOGIN', 'Admin user logged in', '192.168.1.100', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'),
('cc0e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440002', 'DEPOSIT', 'Deposit transaction processed', '10.0.0.50', 'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15'),
('cc0e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440003', 'TRANSFER', 'Inter-account transfer executed', '172.16.0.25', 'Mozilla/5.0 (Android 11; Mobile) AppleWebKit/537.36'),
('cc0e8400-e29b-41d4-a716-446655440004', '550e8400-e29b-41d4-a716-446655440004', 'WITHDRAWAL', 'ATM withdrawal processed', '192.168.1.200', 'Banking App v2.1.0'),
('cc0e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440005', 'PROFILE_UPDATE', 'User profile information updated', '10.0.0.75', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36'),
('cc0e8400-e29b-41d4-a716-446655440006', '550e8400-e29b-41d4-a716-446655440006', 'PASSWORD_CHANGE', 'Account password changed', '172.16.0.100', 'Chrome/96.0.4664.110'),
('cc0e8400-e29b-41d4-a716-446655440007', '550e8400-e29b-41d4-a716-446655440007', 'ACCOUNT_CREATION', 'New savings account created', '192.168.1.150', 'Firefox/95.0'),
('cc0e8400-e29b-41d4-a716-446655440008', '550e8400-e29b-41d4-a716-446655440008', 'LIMIT_UPDATE', 'Transaction limits modified', '10.0.0.125', 'Safari/15.1'),
('cc0e8400-e29b-41d4-a716-446655440009', '550e8400-e29b-41d4-a716-446655440009', 'LOGIN_FAILED', 'Failed login attempt detected', '203.0.113.45', 'Unknown User Agent'),
('cc0e8400-e29b-41d4-a716-446655440010', '550e8400-e29b-41d4-a716-446655440010', 'LOGOUT', 'User logged out successfully', '192.168.1.75', 'Edge/96.0.1054.62');

SELECT 'Database setup completed successfully with realistic Egyptian data!' AS status;
